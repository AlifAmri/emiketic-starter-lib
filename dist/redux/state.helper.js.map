{"version":3,"sources":["../../src/redux/state.helper.js"],"names":["createSimpleOperation","module","name","TYPE","action","payload","type","createAsyncOperation","prefix","REQUEST","SUCCESS","FAILURE","request","input","success","output","dispatch","failure","error","INDEX_PAGE_SIZE_DEFAULT","createIndexMetaActions","substate","actionType","defaults","$reset","meta","filter","sort","page","pageSize","$filter","$sort","$pageSize","$page","getState","pageTotal"],"mappings":"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","sourcesContent":["/**\n * Action creator factory for simple operation\n */\n\nexport function createSimpleOperation(module, name) {\n  const TYPE = `${module}.${name}`;\n\n  return {\n    module,\n\n    name,\n\n    TYPE,\n\n    action(payload = {}) {\n      return {\n        type: TYPE,\n        ...payload,\n      };\n    },\n  };\n}\n\n/**\n * Action creators factory for typical async operation\n */\n\nexport function createAsyncOperation(module, name) {\n  const prefix = `${module}.${name}`;\n\n  const REQUEST = `${prefix}.REQUEST`;\n  const SUCCESS = `${prefix}.SUCCESS`;\n  const FAILURE = `${prefix}.FAILURE`;\n\n  return {\n    module,\n\n    name,\n\n    REQUEST,\n\n    request(input = {}) {\n      return {\n        type: REQUEST,\n        ...input,\n      };\n    },\n\n    SUCCESS,\n\n    success(output = {}) {\n      return (dispatch) => {\n        dispatch({\n          type: SUCCESS,\n          ...output,\n        });\n\n        return output;\n      };\n    },\n\n    FAILURE,\n\n    failure(error) {\n      return (dispatch) => {\n        dispatch({\n          type: FAILURE,\n        });\n\n        throw error;\n      };\n    },\n  };\n}\n\n/**\n * Action creators makers for typical index view\n */\n\nconst INDEX_PAGE_SIZE_DEFAULT = 50;\n\nexport function createIndexMetaActions(substate, actionType, defaults = {}) {\n  function $reset() {\n    return {\n      type: actionType,\n      meta: {\n        filter: defaults.filter || '',\n        sort: defaults.sort || '',\n        page: 1,\n        pageSize: defaults.pageSize || INDEX_PAGE_SIZE_DEFAULT,\n      },\n    };\n  }\n\n  function $filter(filter = '') {\n    return {\n      type: actionType,\n      meta: {\n        filter,\n        page: 1,\n      },\n    };\n  }\n\n  function $sort(sort = '') {\n    return {\n      type: actionType,\n      meta: {\n        sort,\n        page: 1,\n      },\n    };\n  }\n\n  function $pageSize(pageSize = INDEX_PAGE_SIZE_DEFAULT) {\n    if (pageSize < 1) {\n      pageSize = 10;\n    }\n\n    if (pageSize > 100) {\n      pageSize = 100;\n    }\n\n    return {\n      type: actionType,\n      meta: {\n        pageSize,\n        page: 1,\n      },\n    };\n  }\n\n  function $page(page = 1) {\n    return (dispatch, getState) => {\n      const { meta } = getState()[substate];\n\n      if (page < 1) {\n        page = 1;\n      }\n\n      if (page > meta.pageTotal) {\n        page = meta.pageTotal - 1;\n      }\n\n      dispatch({\n        type: actionType,\n        meta: {\n          page,\n        },\n      });\n    };\n  }\n\n  return {\n    $reset,\n    $filter,\n    $sort,\n    $pageSize,\n    $page,\n  };\n}\n"],"file":"state.helper.js"}